<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>STAT 125 - Cohort studies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STAT 125</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./schedule.html" rel="" target="">
 <span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./syllabus.html" rel="" target="">
 <span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-activities" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Activities</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-activities">    
        <li>
    <a class="dropdown-item" href="./01-introductions.html" rel="" target="">
 <span class="dropdown-text">Welcome to the course!</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02-measuring-disease.html" rel="" target="">
 <span class="dropdown-text">Measuring disease</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-mortality-standardization.html" rel="" target="">
 <span class="dropdown-text">Measuring mortality, standardization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./04-life-exp.html" rel="" target="">
 <span class="dropdown-text">Life expectancy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mini-project1.html" rel="" target="">
 <span class="dropdown-text">Mini-project 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./05-cohort.html" rel="" target="">
 <span class="dropdown-text">Cohort studies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./06-case-control.html" rel="" target="">
 <span class="dropdown-text">Case-control studies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./07-confounding-causation.html" rel="" target="">
 <span class="dropdown-text">Confounding and causation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mini-project2.html" rel="" target="">
 <span class="dropdown-text">Mini-project 2</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-content-conversations" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Content Conversations</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-content-conversations">    
        <li>
    <a class="dropdown-item" href="./content_conversation1.html" rel="" target="">
 <span class="dropdown-text">Content Conversation 1</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./project.html" rel="" target="">
 <span class="menu-text">Project</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#learning-goals" id="toc-learning-goals" class="nav-link active" data-scroll-target="#learning-goals">Learning goals</a></li>
  <li><a href="#recap-of-video-material" id="toc-recap-of-video-material" class="nav-link" data-scroll-target="#recap-of-video-material">Recap of video material</a>
  <ul class="collapse">
  <li><a href="#observational-vs.-experimental" id="toc-observational-vs.-experimental" class="nav-link" data-scroll-target="#observational-vs.-experimental">Observational vs.&nbsp;experimental</a></li>
  <li><a href="#ecological-studies" id="toc-ecological-studies" class="nav-link" data-scroll-target="#ecological-studies">Ecological studies</a></li>
  <li><a href="#cohort-studies" id="toc-cohort-studies" class="nav-link" data-scroll-target="#cohort-studies">Cohort studies</a>
  <ul class="collapse">
  <li><a href="#study-design" id="toc-study-design" class="nav-link" data-scroll-target="#study-design">Study design</a></li>
  <li><a href="#using-data-to-make-comparisons" id="toc-using-data-to-make-comparisons" class="nav-link" data-scroll-target="#using-data-to-make-comparisons">Using data to make comparisons</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#activity" id="toc-activity" class="nav-link" data-scroll-target="#activity">Activity</a></li>
  <li><a href="#article-discussion" id="toc-article-discussion" class="nav-link" data-scroll-target="#article-discussion">Article discussion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Cohort studies</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="learning-goals" class="level1">
<h1>Learning goals</h1>
<p>After this lesson, you should be able to:</p>
<ul>
<li>Explain the rationale for how cohort studies help us study the link between exposures and disease outcomes.</li>
<li>Describe the difference between measuring the strength of association between exposure and disease versus impact of exposure on disease risk.</li>
<li>Compute and interpret a relative risk from study data.</li>
<li>Compute and interpret an attributable risk (AR) and a population attributable risk (PAR) from study data.</li>
</ul>
<p><br><br><br><br></p>
</section>
<section id="recap-of-video-material" class="level1">
<h1>Recap of video material</h1>
<section id="observational-vs.-experimental" class="level2">
<h2 class="anchored" data-anchor-id="observational-vs.-experimental">Observational vs.&nbsp;experimental</h2>
<p>Observational studies</p>
<ul>
<li>Cohort studies (this week)</li>
<li>Case-control studies (next week)</li>
<li>Ecological studies (this week)</li>
</ul>
<p>Experimental studies</p>
<ul>
<li>Randomized experiments (after Spring Break)</li>
</ul>
</section>
<section id="ecological-studies" class="level2">
<h2 class="anchored" data-anchor-id="ecological-studies">Ecological studies</h2>
<p>Ecological studies, like cohort studies, are a type of observational study. In these studies, the unit of observation is an <strong>aggregate</strong> (e.g., state, country) rather than an individual person.</p>
<p>The following ﬁgure from <a href="https://pubmed.ncbi.nlm.nih.gov/3292773/">this article</a> shows an example of an ecological study. The unit of observation is a country, and on each country, we have data on breast cancer incidence and average dietary fat consumption.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ecological_bc_fat.png" class="img-fluid figure-img" style="width:65.0%"></p>
</figure>
</div>
<ul>
<li>What we do learn from this study: There seems to be a relationship between breast cancer incidence and average fat consumption <strong>at the country level</strong>.</li>
<li>What we do not learn: We do not learn whether there is a relationship between breast cancer incidence and average fat consumption <strong>at the individual level</strong>. That is, we do not learn that an individual is more likely to develop breast cancer if they eat more fat.</li>
</ul>
<p>The <strong>ecological fallacy</strong> is a term that describes the idea that a conclusion on aggregate data does not necessarily transfer to individuals.</p>
<p><br></p>
<p>Let’s look at one more example. A <a href="https://www.nejm.org/doi/full/10.1056/nejmon1211064">New England Journal of Medicine study</a> looked at the relationship between chocolate consumption and cognitive function by using country-level data:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/ecological_chocolate_nobel.png" class="img-fluid figure-img" style="width:65.0%"></p>
</figure>
</div>
<p>We’ll think more on this study in our exercises.</p>
</section>
<section id="cohort-studies" class="level2">
<h2 class="anchored" data-anchor-id="cohort-studies">Cohort studies</h2>
<section id="study-design" class="level3">
<h3 class="anchored" data-anchor-id="study-design">Study design</h3>
<p>Unlike ecological studies, cohort studies obtain data on <strong>individuals</strong>.</p>
<ul>
<li>Contextual knowledge leads investigators to explore a particular exposure. Even though <em>exposure</em> has the connotation of a harmful exposure, the exposure studied could be a beneficial exposure, like a treatment.</li>
<li>Once we have identified individuals who were exposed and unexposed, we follow them over time to collect incidence data.
<ul>
<li>This can be done prospectively (actually following forward in time) or retrospectively (looking back historically at an earlier time point and following time forward to the present).</li>
</ul></li>
</ul>
</section>
<section id="using-data-to-make-comparisons" class="level3">
<h3 class="anchored" data-anchor-id="using-data-to-make-comparisons">Using data to make comparisons</h3>
<p>Cohort study data allows us to compare incidence between the exposed (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub><annotation encoding="application/x-tex">I_{exp}</annotation></semantics></math>) and unexposed (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mrow><mi>u</mi><mi>n</mi><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub><annotation encoding="application/x-tex">I_{unexp}</annotation></semantics></math>).</p>
<p><strong>Ratios:</strong></p>
<ul>
<li><strong>Relative risk:</strong> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub><mi>/</mi><msub><mi>I</mi><mrow><mi>u</mi><mi>n</mi><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{exp}/I_{unexp}</annotation></semantics></math>
<ul>
<li>It measures how strongly associated exposure and disease are.</li>
<li><em>Interpretation:</em> If RR = 2, we say that the exposed group is 2 times as likely to experience the outcome as the unexposed group.</li>
</ul></li>
</ul>
<p><strong>Differences:</strong></p>
<ul>
<li><strong>Attributable risk in the exposed (AR):</strong> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub><mo>−</mo><msub><mi>I</mi><mrow><mi>u</mi><mi>n</mi><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{exp} - I_{unexp}</annotation></semantics></math>
<ul>
<li>This measures impact of exposure (or excess risk) in exposed individuals. If we could have removed the exposure for people who were exposed, how much disease could we prevent?</li>
<li><em>Interpretation:</em> If AR = 130 cases/100,000 people, we interpret this AR as “If there were 100,000 fewer exposures, we would expect to see 130 fewer disease cases.”</li>
</ul></li>
<li><strong>Attributable risk in the population (PAR):</strong> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>p</mi><mi>o</mi><mi>p</mi></mrow></msub><mo>−</mo><msub><mi>I</mi><mrow><mi>u</mi><mi>n</mi><mi>e</mi><mi>x</mi><mi>p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">I_{pop} - I_{unexp}</annotation></semantics></math>
<ul>
<li>This measures the impact of exposure in a population. If we could remove an exposure for an entire population, how much disease could we prevent?</li>
<li><em>Interpretation:</em> If PAR = 90 cases/100,000 people, we interpret this AR as “If we eliminated the exposure across the entire population, we would expect to see 90 fewer disease cases per 100,000 people.”</li>
<li>Note: PAR will be between 0 and AR.
<ul>
<li>The extreme of 0 represents the impact if <em>no one</em> in the population is exposed.</li>
<li>The extreme of AR represents the impact if <em>everyone</em> in the population is exposed.</li>
<li>We can also see that PAR is between 0 and AR from the fact that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>A</mi><mi>R</mi><mo>=</mo><mi>A</mi><mi>R</mi><mo>×</mo><mtext mathvariant="normal">Prevalence of exposure</mtext></mrow><annotation encoding="application/x-tex">PAR = AR \times \text{Prevalence of exposure}</annotation></semantics></math> because exposure prevalence is between 0 and 1.</li>
</ul></li>
</ul></li>
</ul>
<p><br><br><br><br></p>
</section>
</section>
</section>
<section id="activity" class="level1">
<h1>Activity</h1>
<p>Navigate to <a href="https://moodle.macalester.edu/mod/folder/view.php?id=86428">Moodle</a>, and open the PDF titled <code>05_cohort_studies_activity</code>.</p>
<p><br><br><br><br></p>
</section>
<section id="article-discussion" class="level1">
<h1>Article discussion</h1>
<p>We’ll explore the details of the article <a href="https://academic.oup.com/aje/article/181/11/874/87434">Association of Stillbirth With Ambient Air Pollution in a California Cohort Study</a> through the following discussion questions:</p>
<ol type="1">
<li><p>In the abstract, the authors mention that they use a “retrospective cohort design.” Based on what you read in the Methods section, how do you think a retrospective cohort study is carried out in general? What could be one advantage of this study design?</p></li>
<li><p>What concerns might we have about the quality/accuracy of different pieces of data in this study?</p></li>
<li><p>We’ve used 2x2 tables to summarize information from cohort studies. What do you think such a table would like for this study?</p></li>
<li><p>In the Discussion, the authors discuss their inability to look at the role of smoking in stillbirth risk. They are not overly concerned, for they state: “Previous studies of other birth outcomes conducted in California and nationally have not seen shifts in air pollution associations after adjustment for smoking.” Describe how concepts from direct standardization apply here.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© Leslie Myint, 2024<br> All content licensed under <img src="https://static.thenounproject.com/png/70967-200.png" height="20"> (<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>)</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Site built with <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>